{"version":3,"file":"js/370.ca5da336.js","mappings":"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","sources":["webpack://messenger-app/./src/views/auth/ProfileEditPage.vue","webpack://messenger-app/./src/components/UI/Auth/ProfileEdit.vue","webpack://messenger-app/./src/utils/imageUpload.ts","webpack://messenger-app/./src/components/UI/Auth/ProfileEdit.vue?00ff","webpack://messenger-app/./src/views/auth/ProfileEditPage.vue?0a35"],"sourcesContent":["<template>\r\n    <div class=\"w-full h-full bg-white dark:bg-dark-200 sm:rounded sm:shadow sm:h-auto flex justify-center items-center\">\r\n        <profile-edit v-if=\"user\" :user=\"user\" @close=\"redirect\"/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport ProfileEdit from '@/components/UI/Auth/ProfileEdit.vue'\r\nexport default {    \r\n    props: {\r\n        uid: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    },\r\n    name: 'ProfileEditPage',\r\n    components: { ProfileEdit },\r\n    data: () => ({ user: null }),\r\n    methods: {\r\n        redirect() {\r\n            if(this.$route.query.fallback)\r\n                this.$router.push({name: this.$route.query.fallback})\r\n            else this.$router.push('/')\r\n        }\r\n    },\r\n    async created() {\r\n        this.user = await this.$store.dispatch('auth/getCachedUser', this.uid)\r\n        if(!this.uid || !this.user) {\r\n            this.$router.push({name: this.$route.query.fallback || 'login', query: {\r\n                message: 'auth/user-not-found'\r\n            }})\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n  <form class=\"relative flex flex-col sm:gap-4 gap-2 min-w-[220px] sm:h-auto w-full h-full rounded px-4 py-2 bg-white dark:bg-dark-200\" @submit.prevent=\"onSubmit\">\r\n    <header class=\"flex flex-col gap-2\">\r\n        <div class=\"flex justify-between items-center\">\r\n            <p class=\"font-semibold text-lg text-gray-700 dark:text-gray-300\">{{ $t('titles.profile') }}</p>\r\n            <small class=\"flex items-center gap-4 text-xs text-gray-700 dark:text-gray-300\" v-if=\"loading\">{{$t('form.operations.titles.update')}}<base-loader size=\"small\" /></small>\r\n            <small class=\"flex items-center gap-4 text-xs text-gray-700 dark:text-gray-300\" v-else-if=\"imageLoading\">{{ $t('form.operations.titles.wait') }}<base-loader size=\"small\" /></small>\r\n        </div>\r\n    </header>\r\n    <main class=\"sm:overflow-visible flex flex-col flex-1 sm:gap-4 gap-2\">\r\n        <div class=\"flex sm:flex-row flex-col gap-6 items-center flex-wrap w-full\">\r\n            <div class=\"sm:w-[6rem] w-[12rem] flex flex-col gap-2 text-center items-center mt-6\">\r\n                <div\r\n                ref=\"imageWrapper\"\r\n                @click=\"$refs.fileInput.click()\"\r\n                class=\"flex justify-center items-center w-44 h-44 sm:w-[6rem] sm:h-[6rem] rounded-full bg-gray-200 cursor-pointer transition-all hover:opacity-75 overflow-hidden\" title=\"Загрузка фото\">\r\n                    <img :src=\"form.photoUrl\" :alt=\"form.name\" :class=\"imageLoading || !form.photoUrl ? 'hidden appearance-none' : 'h-full w-full object-cover'\">\r\n                </div>\r\n                <input\r\n                @change=\"imageUpload\"\r\n                type=\"file\"\r\n                name=\"avatar\"\r\n                ref=\"fileInput\"\r\n                accept=\"image/*\"\r\n                class=\"hidden\" >\r\n                <small class=\"text-xs text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-600 cursor-pointer whitespace-nowrap\" @click=\"imageGenerate\">{{ $t('phrases.randomAvatar') }}</small> \r\n            </div>\r\n            <div class=\"flex min-w-[2rem] flex-col flex-1 justify-center w-full gap-2\">\r\n                <div class=\"flex-4\">\r\n                    <base-input v-model=\"form.name\" :label=\"$t('form.placeholders.username')\" class=\"pb-2\"></base-input>\r\n                    <base-checkbox v-model=\"checked\" class=\"pb-4\">{{$t('phrases.namedAvatar')}}</base-checkbox>\r\n                </div>\r\n                <base-input :value=\"user.email\" :label=\"$t('form.placeholders.email')\" disabled class=\"flex-6\"></base-input>\r\n            </div>\r\n        </div>\r\n        <base-textarea\r\n        class='max-h-full'\r\n        :maxLength=\"256\"\r\n        v-model=\"form.bio\"\r\n        :label=\"$t('form.placeholders.bio')\" />\r\n        <div class=\"grid grid-cols-5 gap-2\">\r\n            <base-button class=\"col-span-3\" type=\"submit\" @click=\"onSubmit\">{{ $t('form.buttons.save') }}</base-button>\r\n            <base-button class=\"col-span-2\" theme=\"passive\" @click=\"close\"> {{ $t('form.buttons.cancel') }} </base-button>\r\n        </div>\r\n    </main>\r\n    <footer class=\"flex flex-col gap-3\">\r\n        <small class=\"text-gray-400 text-xs w-full text-end\">Avatars by Multiavatar.com</small>\r\n    </footer>\r\n</form>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\"\r\nimport { getDataURL, URLtoFile, getGeneratedAvatar } from '@/utils/imageUpload'\r\nexport default {\r\n    props: {\r\n        user: {\r\n            type: Object,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            form: {\r\n                name: '',\r\n                bio: '',\r\n                photoUrl: '',\r\n                email: ''\r\n            },\r\n            loading: false,\r\n            checked: false,\r\n            width: 96,\r\n            compressModifier: 100,\r\n            imageLoading: false,\r\n            debouncedAvatarQuery: null\r\n        }\r\n    },\r\n    created() {\r\n        this.form.email = this.user.email\r\n    },\r\n    mounted() {\r\n        if(!this.user) {\r\n            this.$toast.show('Пользователь не найден')\r\n        }\r\n        Object.keys(this.form).forEach((key) => {\r\n            this.form[key] = this.user[key]\r\n        })\r\n    },\r\n    methods: {\r\n        close() {\r\n            this.$emit('close')\r\n        },\r\n        async imageUpload(e) {\r\n            try {\r\n                const inputImage = e.target.files[0]\r\n                this.imageLoading = true\r\n                this.form.photoUrl = (await getDataURL(inputImage, 90, this.width)).dataUrl \r\n                this.imageLoading = false\r\n            }\r\n            catch {\r\n                this.$toast.show('Что то пошло не так :(')\r\n                this.imageLoading = false\r\n            }\r\n        },\r\n        async imageGenerate() {\r\n            try {\r\n                this.imageLoading = true\r\n                this.form.photoUrl = (await getGeneratedAvatar())\r\n            }\r\n            catch(e) {\r\n                console.warn(e)\r\n            } \r\n            this.imageLoading = false\r\n        },\r\n        async onSubmit() {\r\n            this.loading = true\r\n            let profile_body = {...this.form}\r\n            try {\r\n                const file = await URLtoFile(this.form.photoUrl)\r\n                profile_body = {\r\n                    ...this.form,\r\n                    profile_photo_file: file\r\n                }\r\n            }\r\n            catch(e) {\r\n                console.warn(e)\r\n            }\r\n            await this.$store.dispatch('auth/updateUserProfile', { ...profile_body })\r\n            await this.$store.dispatch('auth/cacheUser', {\r\n                email: this.user.email,\r\n                uid: this.user.uid,\r\n                name: this.form.name,\r\n                photoUrl: this.form.photoUrl,\r\n                password: this.user.password,\r\n                bio: this.form.bio\r\n            })\r\n            this.loading = false\r\n            this.$emit('close')\r\n        }\r\n    },\r\n    watch: {\r\n        async \"form.name\"(newVal) {\r\n            if(this.debouncedAvatarQuery) this.debouncedAvatarQuery.cancel() \r\n            if(this.checked) {\r\n                this.imageLoading = true\r\n                this.debouncedAvatarQuery = _.debounce(async function(q){\r\n                    this.form.photoUrl = await getGeneratedAvatar(q)\r\n                    this.imageLoading = false\r\n                }, 850).bind(this)(newVal)\r\n            }\r\n        },\r\n        async checked(newVal, oldVal){\r\n            if(!oldVal && newVal && this.form.name) {\r\n                this.imageLoading = true\r\n                this.form.photoUrl = await getGeneratedAvatar(this.form.name)\r\n                this.imageLoading = false\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","type dataURL = {\r\n    dataUrl: string,\r\n    additionalData: string,\r\n    coded: string\r\n}\r\nfunction getDataURL(inputImage: Blob, compress: number, width: number, height: number): Promise<dataURL> {\r\n    return new Promise(resolve => {\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(inputImage)\r\n        reader.onload = function (this: FileReader, event: ProgressEvent<FileReader>): void {\r\n            const imageDataUrl = (event.target as FileReader).result as string\r\n            const imageElement: HTMLImageElement = document.createElement('img')\r\n            imageElement.src = imageDataUrl\r\n            imageElement.onload = function (this: GlobalEventHandlers, e: Event) {\r\n                const ratio = width / (e.target as HTMLImageElement).width,\r\n                    canvas: HTMLCanvasElement = document.createElement('canvas'),\r\n                    ctx = canvas.getContext('2d') as CanvasRenderingContext2D\r\n                canvas.width = width\r\n                if(!height) canvas.height = (e.target as HTMLCanvasElement).height * ratio\r\n                else canvas.height = height\r\n                \r\n                ctx.drawImage(imageElement, 0, 0, canvas.width, canvas.height)\r\n                const newImageDataUrl = ctx.canvas.toDataURL('image/jpeg', compress)\r\n                console.log({\r\n                    dataUrl: newImageDataUrl,\r\n                    additionalData: newImageDataUrl.split(',')[0],\r\n                    coded: newImageDataUrl.split(',')[1]\r\n                })\r\n                resolve({\r\n                    dataUrl: newImageDataUrl,\r\n                    additionalData: newImageDataUrl.split(',')[0],\r\n                    coded: newImageDataUrl.split(',')[1]\r\n                })            \r\n            }            \r\n        }\r\n    })   \r\n}\r\nasync function URLtoFile(url: string): Promise<File | null>{\r\n    try {\r\n        if(url.includes('firebasestorage')) return null\r\n        const blobbed_response: Blob = await (await fetch(url))?.blob(),\r\n          file = new File([blobbed_response], 'File', {type: blobbed_response.type})\r\n        return file\r\n    }\r\n    catch(e) {\r\n        console.warn(\"Failed to fetch an image URL, this may be a CORS\")\r\n        throw(e)\r\n    }\r\n}\r\nasync function getGeneratedAvatar(q = ''): Promise<string> {\r\n    if(!q) {\r\n        for(let i = 0; i < 6; i++) {\r\n            q += Math.floor(Math.random() * 47).toString()\r\n        }\r\n    }\r\n    const res = await fetch(`https://api.multiavatar.com/${q}.png?apikey=2xi9ve1j34EPd8`)\r\n    if(res.status != 200) throw(new Error())\r\n    else return res.url\r\n}\r\nexport { getDataURL, getGeneratedAvatar, URLtoFile }","import { render } from \"./ProfileEdit.vue?vue&type=template&id=3bef184a\"\nimport script from \"./ProfileEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue\\\\messenger-app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProfileEditPage.vue?vue&type=template&id=743dbae2\"\nimport script from \"./ProfileEditPage.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileEditPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\vue\\\\messenger-app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_ctx","user","_createBlock","_component_profile_edit","onClose","$options","redirect","_createElementVNode","onSubmit","_cache","_withModifiers","args","_hoisted_2","_hoisted_3","_toDisplayString","$t","$data","loading","_hoisted_4","_createVNode","_component_base_loader","size","imageLoading","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","ref","onClick","$event","$refs","fileInput","click","title","src","form","photoUrl","alt","name","_normalizeClass","onChange","imageUpload","type","accept","imageGenerate","_hoisted_10","_hoisted_11","_component_base_input","label","_component_base_checkbox","checked","value","$props","email","disabled","_component_base_textarea","maxLength","bio","_hoisted_12","_component_base_button","theme","close","_hoisted_13","getDataURL","inputImage","compress","width","height","Promise","resolve","reader","FileReader","readAsDataURL","onload","event","imageDataUrl","target","result","imageElement","document","createElement","e","ratio","canvas","ctx","getContext","drawImage","newImageDataUrl","toDataURL","console","log","dataUrl","additionalData","split","coded","async","URLtoFile","url","includes","blobbed_response","fetch","blob","file","File","warn","getGeneratedAvatar","q","i","Math","floor","random","toString","res","status","Error","props","Object","required","data","compressModifier","debouncedAvatarQuery","created","this","mounted","$toast","show","keys","forEach","key","methods","$emit","files","profile_body","profile_photo_file","$store","dispatch","uid","password","watch","newVal","cancel","_","bind","oldVal","__exports__","String","components","ProfileEdit","$route","query","fallback","$router","push","message","render"],"sourceRoot":""}