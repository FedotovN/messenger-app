{"version":3,"file":"js/747.abcfa700.js","mappings":"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","sources":["webpack://messenger-app/./src/views/auth/ProfileEditPage.vue?c741","webpack://messenger-app/./src/components/UI/Auth/ProfileEdit.vue","webpack://messenger-app/./src/utils/imageUpload.ts","webpack://messenger-app/./src/components/UI/Auth/ProfileEdit.vue?00ff","webpack://messenger-app/./src/views/auth/ProfileEditPage.vue?1366","webpack://messenger-app/./src/views/auth/ProfileEditPage.vue"],"sourcesContent":["import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"w-full h-full bg-white dark:bg-dark-200 sm:rounded sm:shadow sm:h-auto flex justify-center items-center overflow-y-scroll scrollbar-hide\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_profile_edit = _resolveComponent(\"profile-edit\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_ctx.user)\n      ? (_openBlock(), _createBlock(_component_profile_edit, {\n          key: 0,\n          user: _ctx.user,\n          onClose: _ctx.redirect\n        }, null, 8, [\"user\", \"onClose\"]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","<template>\r\n  <form class=\"relative flex flex-col sm:gap-4 gap-2 min-w-[220px] sm:h-auto w-full h-full rounded px-4 py-2 bg-white dark:bg-dark-200\" @submit.prevent=\"onSubmit\">\r\n    <header class=\"flex flex-col gap-2\">\r\n        <div class=\"flex justify-between items-center\">\r\n            <p class=\"font-semibold text-lg text-gray-700 dark:text-gray-300\">{{ $t('titles.profile') }}</p>\r\n            <small class=\"flex items-center gap-4 text-xs text-gray-700 dark:text-gray-300\" v-if=\"loading\">{{$t('form.operations.titles.update')}}<base-loader size=\"small\" /></small>\r\n            <small class=\"flex items-center gap-4 text-xs text-gray-700 dark:text-gray-300\" v-else-if=\"imageLoading\">{{ $t('form.operations.titles.wait') }}<base-loader size=\"small\" /></small>\r\n        </div>\r\n    </header>\r\n    <main class=\"sm:overflow-visible flex flex-col flex-1 sm:gap-4 gap-2\">\r\n        <div class=\"flex sm:flex-row flex-col gap-6 items-center flex-wrap w-full\">\r\n            <div class=\"sm:w-[6rem] w-[12rem] flex flex-col gap-2 text-center items-center mt-6\">\r\n                <div\r\n                ref=\"imageWrapper\"\r\n                @click=\"$refs.fileInput.click()\"\r\n                class=\"flex justify-center items-center w-44 h-44 sm:w-[6rem] sm:h-[6rem] rounded-full bg-gray-200 cursor-pointer transition-all hover:opacity-75 overflow-hidden\" title=\"Загрузка фото\">\r\n                    <img :src=\"form.photoURL\" :alt=\"form.name\" :class=\"imageLoading || !form.photoURL ? 'hidden appearance-none' : 'h-full w-full object-cover'\">\r\n                </div>\r\n                <input\r\n                @change=\"imageUpload\"\r\n                type=\"file\"\r\n                name=\"avatar\"\r\n                ref=\"fileInput\"\r\n                accept=\"image/*\"\r\n                class=\"hidden\" >\r\n                <small class=\"text-xs text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-600 cursor-pointer whitespace-nowrap\" @click=\"imageGenerate\">{{ $t('phrases.randomAvatar') }}</small> \r\n            </div>\r\n            <div class=\"flex min-w-[2rem] flex-col flex-1 justify-center w-full gap-2\">\r\n                <div class=\"flex-4\">\r\n                    <base-input v-model=\"form.name\" :label=\"$t('form.placeholders.username')\" class=\"pb-2\"></base-input>\r\n                    <base-checkbox v-model=\"checked\" class=\"pb-4\">{{$t('phrases.namedAvatar')}}</base-checkbox>\r\n                </div>\r\n                <base-input :value=\"user.email\" :label=\"$t('form.placeholders.email')\" disabled class=\"flex-6\"></base-input>\r\n            </div>\r\n        </div>\r\n        <base-textarea\r\n        class='max-h-full'\r\n        :maxLength=\"256\"\r\n        v-model=\"form.bio\"\r\n        :label=\"$t('form.placeholders.bio')\" />\r\n        <div class=\"grid grid-cols-5 gap-2\">\r\n            <base-button class=\"col-span-3\" type=\"submit\" @click=\"onSubmit\">{{ $t('form.buttons.save') }}</base-button>\r\n            <base-button class=\"col-span-2\" theme=\"passive\" @click=\"close\"> {{ $t('form.buttons.cancel') }} </base-button>\r\n        </div>\r\n    </main>\r\n    <footer class=\"flex flex-col gap-3\">\r\n        <small class=\"text-gray-400 text-xs w-full text-end\">Avatars by Multiavatar.com</small>\r\n    </footer>\r\n</form>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\"\r\nimport { getDataURL, URLtoFile, getGeneratedAvatar } from '@/utils/imageUpload'\r\nexport default {\r\n    props: {\r\n        user: {\r\n            type: Object,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            form: {\r\n                name: '',\r\n                bio: '',\r\n                photoURL: '',\r\n                email: ''\r\n            },\r\n            loading: false,\r\n            checked: false,\r\n            width: 96,\r\n            compressModifier: 100,\r\n            imageLoading: false,\r\n            debouncedAvatarQuery: null\r\n        }\r\n    },\r\n    created() {\r\n        this.form.email = this.user.email\r\n    },\r\n    mounted() {\r\n        if(!this.user) {\r\n            this.$toast.show('Пользователь не найден')\r\n        }\r\n        Object.keys(this.form).forEach((key) => {\r\n            this.form[key] = this.user[key]\r\n        })\r\n    },\r\n    methods: {\r\n        close() {\r\n            this.$emit('close')\r\n        },\r\n        async imageUpload(e) {\r\n            try {\r\n                const inputImage = e.target.files[0]\r\n                this.imageLoading = true\r\n                this.form.photoURL = (await getDataURL(inputImage, 90, this.width)).dataUrl \r\n                console.log(inputImage, this.form.photoURL)\r\n                this.imageLoading = false\r\n            }\r\n            catch {\r\n                this.$toast.show('Что то пошло не так :(')\r\n                this.imageLoading = false\r\n            }\r\n        },\r\n        async imageGenerate() {\r\n            try {\r\n                this.imageLoading = true\r\n                this.form.photoURL = (await getGeneratedAvatar())\r\n            }\r\n            catch(e) {\r\n                console.warn(e)\r\n            } \r\n            this.imageLoading = false\r\n        },\r\n        async onSubmit() {\r\n            this.loading = true\r\n            let profile_body = {...this.form}\r\n            try {\r\n                const file = await URLtoFile(this.form.photoURL)\r\n                profile_body = {\r\n                    ...this.form,\r\n                    profile_photo_file: file\r\n                }\r\n            }\r\n            catch(e) {\r\n                console.warn(e)\r\n            }\r\n            await this.$store.dispatch('auth/updateUserProfile', { ...profile_body })\r\n            await this.$store.dispatch('auth/cacheUser', {\r\n                email: this.user.email,\r\n                uid: this.user.uid,\r\n                name: this.form.name,\r\n                photoURL: this.form.photoURL,\r\n                password: this.user.password,\r\n                bio: this.form.bio\r\n            })\r\n            this.loading = false\r\n            this.$emit('close')\r\n        }\r\n    },\r\n    watch: {\r\n        async \"form.name\"(newVal) {\r\n            if(this.debouncedAvatarQuery) this.debouncedAvatarQuery.cancel() \r\n            if(this.checked) {\r\n                this.imageLoading = true\r\n                this.debouncedAvatarQuery = _.debounce(async function(q){\r\n                    this.form.photoURL = await getGeneratedAvatar(q)\r\n                    this.imageLoading = false\r\n                }, 850).bind(this)(newVal)\r\n            }\r\n        },\r\n        async checked(newVal, oldVal){\r\n            if(!oldVal && newVal && this.form.name) {\r\n                this.imageLoading = true\r\n                this.form.photoURL = await getGeneratedAvatar(this.form.name)\r\n                this.imageLoading = false\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","type dataURL = {\r\n    dataUrl: string,\r\n    additionalData: string,\r\n    coded: string\r\n}\r\nfunction getDataURL(inputImage: Blob, compress: number, width: number, height: number): Promise<dataURL> {\r\n    return new Promise(resolve => {\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(inputImage)\r\n        reader.onload = function (this: FileReader, event: ProgressEvent<FileReader>): void {\r\n            const imageDataUrl = (event.target as FileReader).result as string\r\n            const imageElement: HTMLImageElement = document.createElement('img')\r\n            imageElement.src = imageDataUrl\r\n            imageElement.onload = function (this: GlobalEventHandlers, e: Event) {\r\n                const ratio = width / (e.target as HTMLImageElement).width,\r\n                    canvas: HTMLCanvasElement = document.createElement('canvas'),\r\n                    ctx = canvas.getContext('2d') as CanvasRenderingContext2D\r\n                canvas.width = width\r\n                if(!height) canvas.height = (e.target as HTMLCanvasElement).height * ratio\r\n                else canvas.height = height\r\n                \r\n                ctx.drawImage(imageElement, 0, 0, canvas.width, canvas.height)\r\n                const newImageDataUrl = ctx.canvas.toDataURL('image/jpeg', compress)\r\n                resolve({\r\n                    dataUrl: newImageDataUrl,\r\n                    additionalData: newImageDataUrl.split(',')[0],\r\n                    coded: newImageDataUrl.split(',')[1]\r\n                })            \r\n            }            \r\n        }\r\n    })   \r\n}\r\nasync function URLtoFile(url: string): Promise<File | null>{\r\n    try {\r\n        if(url.includes('firebasestorage')) return null\r\n        const blobbed_response: Blob = await (await fetch(url))?.blob(),\r\n          file = new File([blobbed_response], 'File', {type: blobbed_response.type})\r\n        return file\r\n    }\r\n    catch(e) {\r\n        console.warn(\"Failed to fetch an image URL, this may be a CORS\")\r\n        throw(e)\r\n    }\r\n}\r\nasync function getGeneratedAvatar(q = ''): Promise<string> {\r\n    if(!q) {\r\n        for(let i = 0; i < 6; i++) {\r\n            q += Math.floor(Math.random() * 47).toString()\r\n        }\r\n    }\r\n    const res = await fetch(`https://api.multiavatar.com/${q}.png?apikey=2xi9ve1j34EPd8`)\r\n    if(res.status != 200) throw(new Error())\r\n    else return res.url\r\n}\r\nexport { getDataURL, getGeneratedAvatar, URLtoFile }","import { render } from \"./ProfileEdit.vue?vue&type=template&id=5c646cda\"\nimport script from \"./ProfileEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\learn\\\\messenger-app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\r\nimport User from '@/classes/auth/User'\r\nimport ProfileEdit from '@/components/UI/Auth/ProfileEdit.vue'\r\nimport { defineComponent } from 'vue'\r\nexport default defineComponent({    \r\n    props: {\r\n        uid: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    },\r\n    name: 'ProfileEditPage',\r\n    components: { ProfileEdit },\r\n    data: () => ({ user: null }),\r\n    methods: {\r\n        redirect() {\r\n            if(this.$route.query.fallback)\r\n                this.$router.push({name: this.$route.query.fallback})\r\n            else this.$router.push('/')\r\n        }\r\n    },\r\n    async created() {\r\n        this.user = await this.$store.dispatch('contacts/getUserInfoByUid', this.uid) as User\r\n        console.log(this.user)\r\n        if(!this.uid || !this.user) {\r\n            this.$router.push({name: this.$route.query.fallback || 'login', query: {\r\n                message: 'auth/user-not-found'\r\n            }})\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./ProfileEditPage.vue?vue&type=template&id=68cd3f2b&ts=true\"\nimport script from \"./ProfileEditPage.vue?vue&type=script&lang=ts\"\nexport * from \"./ProfileEditPage.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\learn\\\\messenger-app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_profile_edit","_resolveComponent","_openBlock","_createElementBlock","user","_createBlock","key","onClose","redirect","_createCommentVNode","_createElementVNode","onSubmit","_withModifiers","args","_hoisted_2","_hoisted_3","_toDisplayString","$t","loading","_hoisted_4","_createVNode","_component_base_loader","size","imageLoading","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","ref","onClick","$event","$refs","fileInput","click","title","src","form","photoURL","alt","name","_normalizeClass","onChange","imageUpload","type","accept","imageGenerate","_hoisted_10","_hoisted_11","_component_base_input","label","_component_base_checkbox","checked","value","email","disabled","_component_base_textarea","maxLength","bio","_hoisted_12","_component_base_button","theme","close","_hoisted_13","getDataURL","inputImage","compress","width","height","Promise","resolve","reader","FileReader","readAsDataURL","onload","event","imageDataUrl","target","result","imageElement","document","createElement","e","ratio","canvas","ctx","getContext","drawImage","newImageDataUrl","toDataURL","dataUrl","additionalData","split","coded","async","URLtoFile","url","includes","blobbed_response","fetch","blob","file","File","console","warn","getGeneratedAvatar","q","i","Math","floor","random","toString","res","status","Error","props","Object","required","data","compressModifier","debouncedAvatarQuery","created","this","mounted","$toast","show","keys","forEach","methods","$emit","files","log","profile_body","profile_photo_file","$store","dispatch","uid","password","watch","newVal","cancel","_","bind","oldVal","__exports__","defineComponent","String","components","ProfileEdit","$route","query","fallback","$router","push","message"],"sourceRoot":""}